name: main
run-name: main
on: 
  workflow_dispatch:
  push:
    branches: 
      - '**main'
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: checkout code
        id: checkout-code-1
        uses: actions/checkout@v3
        with:
         token: ${{ secrets.GH_T }}
         repo: 'vivekacoustic/ghaction'
         ref: main
         path: parent
         fetch-depth: 0
         
      - name: checkout code
        id: checkout-code-2
        uses: actions/checkout@v3
        with:
         token: ${{ secrets.GH_T }}
         path: new
         fetch-depth: 0

      - name: push to other repo
        run: |
          cp -f parent/.github/workflows/main.yml new/.github/workflows/main.yml
          cd new
          git config --global user.name "vivek"
          git config --global user.email "don@example.com"
          git remote add dest https://github.com/vivekacoustic/ghaction.git
          git checkout -b "cloned_branch"
          git push dest -f


          
